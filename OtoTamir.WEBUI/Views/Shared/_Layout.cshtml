<!doctype html>
<html lang="tr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>OtoTamir | Atölye Yönetimi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="OtoTamir Yönetim Paneli" />
    <meta name="author" content="OtoTamir" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@fontsource/source-sans-3@5.0.12/index.css" integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css" integrity="sha256-tZHrRjVqNSRyWg2wbppGnT833E/Ys0DHWGwT04GiqQg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI=" crossorigin="anonymous" />

    <link rel="stylesheet" href="~/css/adminlte.css" />
</head>

<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">

        @await Component.InvokeAsync("_NavbarViewComponentPartial")

        <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">

            <div class="sidebar-brand">
                <a href="/Home/Index" class="brand-link">
                    <i class="bi bi-wrench-adjustable-circle-fill fs-4 brand-image text-primary"></i>
                    <span class="brand-text fw-light ms-2">Oto<span class="fw-bold">Tamir</span></span>
                </a>
            </div>

            <div class="sidebar-wrapper">
                <nav class="mt-2">
                    <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu" data-accordion="false">

                        <li class="nav-item">
                            <a href="/Home/Index" class="nav-link">
                                <i class="nav-icon bi bi-speedometer2"></i>
                                <p>Genel Bakış (Dashboard)</p>
                            </a>
                        </li>

                        <li class="nav-header">OPERASYON</li>

                        <li class="nav-item">
                            <a href="/ServiceRecord/Index" class="nav-link">
                                <i class="nav-icon bi bi-plus-circle-fill text-primary"></i>
                                <p>Yeni Servis Kaydı</p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/ServiceRecord/Ongoing" class="nav-link">
                                <i class="nav-icon bi bi-list-task"></i>
                                <p>
                                    Aktif İşler
                                    <span class="badge text-bg-primary float-end">Aktif</span>
                                </p>
                            </a>
                        </li>

                        <li class="nav-header">MÜŞTERİ & FİNANS</li>

                        <li class="nav-item">
                            <a href="/Client/Clients" class="nav-link">
                                <i class="nav-icon bi bi-people-fill"></i>
                                <p>Müşteri Listesi</p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/treasury/index" class="nav-link">
                                <i class="nav-icon bi bi-wallet2"></i>
                                <p>Kasa & Hareketler</p>
                            </a>
                        </li>

                        <li class="nav-header">AYARLAR</li>

                        <li class="nav-item">
                            <a href="/Account/Profile" class="nav-link">
                                <i class="nav-icon bi bi-person-gear"></i>
                                <p>Profil & Firma Ayarları</p>
                            </a>
                        </li>

                        <li class="nav-item mt-3">
                            <a asp-controller="Account" asp-action="Logout" class="nav-link bg-danger bg-opacity-10 text-danger">
                                <i class="nav-icon bi bi-box-arrow-right"></i>
                                <p>Güvenli Çıkış</p>
                            </a>
                        </li>

                    </ul>
                </nav>
            </div>
        </aside>

        <main class="app-main">
            <div class="container-fluid mt-3">
                @if (TempData["SuccessMessage"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show shadow-sm" role="alert">
                        <i class="bi bi-check-circle-fill me-2"></i> @TempData["SuccessMessage"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }
                @if (TempData["FailMessage"] != null)
                {
                    <div class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i> @TempData["FailMessage"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }
                @if (TempData["Message"] != null)
                {
                    <div class="alert alert-info alert-dismissible fade show shadow-sm" role="alert">
                        <i class="bi bi-info-circle-fill me-2"></i> @TempData["Message"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }
            </div>

            <div class="app-content py-3">
                <div class="container-fluid">
                    @RenderBody()
                </div>
            </div>
        </main>

        <footer class="app-footer bg-white border-top">
            <div class="float-end d-none d-sm-inline opacity-50 small">
                OtoTamir v1.0
            </div>
            <strong>
                Copyright &copy; @DateTime.Now.Year
                <span class="text-primary">OtoTamir Sistemleri</span>.
            </strong>
            Tüm hakları saklıdır.
        </footer>
    </div>

    <div class="modal fade" id="genericConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow">
                <form id="confirmModalForm" method="post" action="">
                    <div class="modal-header bg-danger text-white">
                        <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Onay Gerekiyor</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body p-4">
                        <p id="confirmModalMessage" class="fs-5 text-center mb-0">Bu işlemi yapmak istediğinize emin misiniz?</p>
                    </div>
                    <div class="modal-footer bg-light">
                        <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Vazgeç</button>
                        <button type="submit" class="btn btn-danger px-4">Evet, Onayla</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js" integrity="sha256-dghWARbRe2eLlIJ56wNB+b760ywulqK3DzZYEpsg2fQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="~/js/adminlte.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js" integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" crossorigin="anonymous"></script>

    @RenderSection("Scripts", required: false)

    <script src="~/js/confirmModal.js"></script>

    <script>
        const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
        const Default = {
            scrollbarTheme: 'os-theme-light',
            scrollbarAutoHide: 'leave',
            scrollbarClickScroll: true,
        };
        document.addEventListener('DOMContentLoaded', function () {
            const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
            if (sidebarWrapper && typeof OverlayScrollbarsGlobal?.OverlayScrollbars !== 'undefined') {
                OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
                    scrollbars: {
                        theme: Default.scrollbarTheme,
                        autoHide: Default.scrollbarAutoHide,
                        clickScroll: Default.scrollbarClickScroll,
                    },
                });
            }
        });

        // Alert mesajlarını 5 saniye sonra otomatik kapat (Opsiyonel)
        setTimeout(function() {
            var alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                var bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);
    </script>
</body>
</html>